<!DOCTYPE html>
<html>

<head>
    <title>Canvasサンプル</title>
    <meta charset="UTF-8">
</head>

<body style="background-color:rgb(237, 247, 255)">
    <h1>Canvasテストサンプル</h1>
    <canvas id="canvas" width=1024 height=768></canvas>
    <script type="text/javascript">
        let canvas = document.getElementById("canvas");
        let context = canvas.getContext("2d");
        let timerID;


        //文字のスタイルを指定
        context.font = '32px serif';
        context.fillStyle = '#404040';
        context.textBaseline = 'center';
        context.textAlign = 'center';

        let array = [
            { text: "ああああああ", width: context.measureText("ああああああ").width, startX: 1024, startY: 300, speed: 5 },
            { text: 1, width: 2, startX: 3, startY: 4 },
        ];

        //start位置
        x = 1024;
        y = 300;

        //スクロール値（スピード）
        dx = 5;

        alert(array[0].text);
        alert(array[0].width);
        alert(array[0].startX);
        alert(array[0].startY);

        function draw(text, drawTextLength) {
            context.clearRect(0, 0, canvas.width, canvas.height);

            context.fillText(text, x, y);

            x -= dx;
            if (x < -1 * drawTextLength) {
                clearInterval(timerID);
            }
        }

        timerID = setInterval(() => {
            draw("ああああああ", context.measureText("ああああああ").width);
        }, 20);

        // function draw(text, drawTextLength) {
        //     context.clearRect(0, 0, canvas.width, canvas.height);

        //     context.fillText(text, x, y);

        //     x -= dx;
        //     if (x < -1 * drawTextLength) {
        //         clearInterval(timerID);
        //     }
        // }

        // timerID = setInterval(() => {
        //     draw("ああああああ", context.measureText("ああああああ").width);
        // }, 20);
    </script>
</body>

</html>
